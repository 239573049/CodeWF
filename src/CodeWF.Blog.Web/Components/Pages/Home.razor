@page "/"
@using CodeWF.Blog.Web.Client.IServices
@using CodeWF.Blog.Web.Client.Models.BlogPosts

@inject IBlogPostService Service

<PageTitle>首页</PageTitle>

@if (_banners?.Count > 0)
{
    <h3>推荐文章</h3>
    <ol>
        @foreach (var blogPost in _banners)
        {
            <li>
                <a href="/post/@blogPost.Date?.Year/@blogPost.Date?.Month/@blogPost.Slug" title="@blogPost.Description">@blogPost.Title</a>
            </li>
        }
    </ol>
}

<_FriendLink/>

@code
{
    private List<BlogPost>? _banners;

    protected override async Task OnInitializedAsync()
    {
        _banners = await Service.GetBannersAsync();
    }
}