@page "/{slug}"
@page "/{year}/{month}/{slug}"
@page "/post/{year}/{month}/{slug}"
@page "/bbs/post/{year}/{month}/{slug}"
@inherits BaseComponent
@inject AppService AppService

<PageTitle>@model?.Title - @AppConfig.AppTitle</PageTitle>

<div class="container cl-container cl-post">
    <div>
        <CmsCard>
            <HeadTemplate>
                <CmsTitle Icon="far fa-file" Title="问题详情" />
                <UPostCount Post="model" />
            </HeadTemplate>
            <ChildContent>
                <div class="title">@model?.Title</div>
                @CmsUtils.GetMarkdownHtml(model?.Content)
                <div class="button">
                    <AntButton Name="返回" Type="default" OnClick="location='./bbs';" />
                </div>
            </ChildContent>
        </CmsCard>
        <div style="height:20px;"></div>
    </div>
    <div>
        @* <SigninBox Service="Service" />
        <div style="height:20px;"></div>*@
        <UPostRank /> 
    </div>
</div>

@code {
    private BlogPost? model;

    [Parameter] public string? Year { get; set; }
    [Parameter] public string? Month { get; set; }
    [Parameter] public string Slug { get; set; }

    protected override async Task OnInitAsync()
    {
        await base.OnInitAsync();

        model = await AppService.GetPostBySlug(Slug);
    }
}